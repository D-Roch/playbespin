<!DOCTYPE html>

<html>
    <head>
        <title>Play IDE</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link rel="stylesheet" type="text/css" media="screen" href="/bespin/public/css/BespinEmbedded.compressed.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="/bespin/public/jtree/themes/default/style.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="/bespin/public/css/main.css" />
        <link rel="shortcut icon" type="image/png" href="/bespin/public/images/favicon.png" />
        <script src="/bespin/public/js/underscore-min.js"></script>
        <script src="/bespin/public/js/jquery-1.4.min.js"></script>
        <script src="/bespin/public/js/jquery.simplemodal-1.3.3.min.js"></script>
        <script src="/bespin/public/jtree/jquery.tree.min.js"></script>
        <script src="/bespin/public/js/BespinEmbedded.compressed.js"></script>
        <script src="/bespin/public/js/main.js"></script>
    </head>
    <body>

<div id="header">
<h1>Play IDE</h1>

<div id="filename"></div>

<div id="toolbar">
    <span id="save-button" class="button"> Save </span>
    <span id="load-button" class="button"> Load </span>
</div>
</div>

<div id="editor"
     class="bespin"
     data-bespinoptions='{ "settings": { "strictlines": true }, "syntax": "html", "stealFocus": true }'>
// Welcome in Play IDE.
var thisCode = "what shows up in the editor";
function editMe() {
  alert("and have fun!");
}
</div>

<div id="loadpopup" style="display: none;">
    <div id="loadfiles"></div>
</div>

<script>
    jQuery.noConflict(); // Bespin includes Dojo so we have to do that

    jQuery(function () {
        jQuery("#loadfiles").tree({
            types: {
               // all node types inherit the "default" node type
                "default" : {
                    draggable : false,
                    deletable : false,
                    renameable : false
                },
                "folder" : {
                    valid_children : [ "file" ]
                },
                "file": {
                    max_children : 0,
                    icon : {
                        image : "/bespin/public/images/file.png"
                    }
                }
            },
            data: {
                type: "json",
                opts: {
                    url : "/bespin/list/"
                }
            }
        });
    });

    var editor;
    window.onBespinLoad = function() {
        bespin = document.getElementById("editor").bespin;
        PlayIDE.init();
    }

    jQuery("#save-button").click(function() {
        PlayIDE.save();
    });

    jQuery("#load-button").click(function() {
        PlayIDE.load();
    });

</script>

    </body>
    
</html>
